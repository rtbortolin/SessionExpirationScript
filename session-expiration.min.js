var sessionExpiration=function(){function e(){var r=new Date((new Date).getTime()+n*6e4),t=new Date((new Date).getTime()+(n-i)*6e4).getTime();t+=":";t+=r.getTime();h(f,t,1)}function s(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)!=-1)return t.substring(r.length,t.length)}return""}function h(n,t,i){var r=new Date,f=r.getTime()+i*864e5,u;r=new Date(f);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u}function o(n){var t=s(f);return parseInt(t.split(":")[n])}function c(){return new Date(o(0))}function l(){return new Date(o(1))}function a(){$(window).ajaxSend(function(){e()})}var i=2,n=3,r,t,u,f=".session-expiration";return{Init:function(f){if(f===undefined)throw"parameters are required.";if(f.expires!==undefined&&(n=f.expires),f.startWarning!==undefined&&(i=f.startWarning),f.sessionExpiring===undefined)throw"sessionExpiring is required";if(r=f.sessionExpiring,f.sessionOk===undefined&&(t=function(){}),t=f.sessionOk,f.sessionTimeout===undefined)throw"sessionTimeout is required.";u=f.sessionTimeout;e();a();var o=setInterval(function(){var f=c(),e=l(),i=new Date,n;i>=f?(n=e.getTime()-i.getTime(),n<=0?(u(),clearInterval(o)):r(parseInt(n/1e3))):t()},1e3)}}}();
