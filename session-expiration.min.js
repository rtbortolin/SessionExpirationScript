var sessionExpiration=function(){function e(){var r=new Date((new Date).getTime()+n*6e4),t=new Date((new Date).getTime()+(n-i)*6e4).getTime();t+=":";t+=r.getTime();h(f,t,1)}function s(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)!=-1)return t.substring(r.length,t.length)}return""}function h(n,t,i){var r=new Date,u=r.getTime()+i*864e5,f;r=new Date(u);f="expires="+r.toUTCString();document.cookie=n+"="+t+";path=/"}function o(n){var t=s(f);return parseInt(t.split(":")[n])}function c(){return new Date(o(0))}function l(){return new Date(o(1))}function a(){$(document).ajaxSend(function(){e()})}var i=2,n=3,r,t,u,f=".session-expiration";return{init:function(f){if(f===undefined)throw"parameters are required.";if(f.expires!==undefined&&(n=f.expires),f.startWarning!==undefined&&(i=f.startWarning),f.sessionExpiring===undefined)throw"sessionExpiring is required";if(r=f.sessionExpiring,f.sessionOk===undefined&&(t=function(){}),t=f.sessionOk,f.sessionTimeout===undefined)throw"sessionTimeout is required.";u=f.sessionTimeout;e();a();var s,h,o=new Date,v=setInterval(function(){var n,i;h=o;s=c();o=l();n=new Date;n>=s?(i=o.getTime()-n.getTime(),i<=0?(u(),clearInterval(v)):r(parseInt(i/1e3))):h.getTime()-o.getTime()!=0&&t()},1e3)}}}();