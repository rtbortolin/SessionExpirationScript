var sessionExpiration=function(){function r(){var r=new Date((new Date).getTime()+n*6e4),t=new Date((new Date).getTime()+(n-u)*6e4).getTime();t+=":";t+=r.getTime();c(i,t)}function s(n){var t=new Date(1970,1,1,0,0,0,0),i="expires="+t.toUTCString(),r=n+"=;"+i}function h(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)!=-1)return t.substring(r.length,t.length)}return""}function c(n,t){document.cookie=n+"="+t+";path=/"}function o(n){var t=h(i);return parseInt(t.split(":")[n])}function l(){return new Date(o(0))}function a(){return new Date(o(1))}function v(){$(document).ajaxSend(function(){r()});window.onbeforeunload=function(){r()}}var u=2,n=3,f,t,e,i=".session-expiration";return{init:function(o){if(s(i),o===undefined)throw"parameters are required.";if(o.expires!==undefined&&(n=o.expires),o.startWarning!==undefined&&(u=o.startWarning),o.sessionExpiring===undefined)throw"sessionExpiring is required";if(f=o.sessionExpiring,o.sessionOk===undefined&&(t=function(){}),t=o.sessionOk,o.sessionTimeout===undefined)throw"sessionTimeout is required.";e=o.sessionTimeout;r();v();var c,y,h=new Date,p=setInterval(function(){var n,i;y=h;c=l();h=a();n=new Date;n>=c?(i=h.getTime()-n.getTime(),i<=0?(e(),clearInterval(p)):f(parseInt(i/1e3))):y.getTime()-h.getTime()!=0&&t()},1e3)}}}();
